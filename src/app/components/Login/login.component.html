<div class="login-container">
<div class="left-panel logo-bg">
    <!-- The logo_transparent.png is now set as background via CSS -->
    <img src="assets/novuslogo.png" alt="Assistant" class="assistant-image">
</div>
<div class="right-panel">
<div class="login-box">
<div class="logo-container">
    <img src="assets/ciscologo.png" alt="Logo" class="logo">
    <!-- <h2>Welcome Back!</h2> -->
    <p>Sign in to continue</p>
</div>
<form *ngIf="!isRegisterMode" [formGroup]="loginForm" (ngSubmit)="submitHandler()">
  <div class="form-group">
    <i class="form-icon fas fa-user"></i>
    <input type="text" id="username" formControlName="username" class="form-control" placeholder="Username" [ngClass]="{ 'is-invalid': submitted && f.username.errors }">
    <div *ngIf="submitted && f.username.errors" class="invalid-feedback">
      <div *ngIf="f.username.errors.required">Username is required</div>
    </div>
  </div>
  <div class="form-group">
    <i class="form-icon fas fa-lock"></i>
    <input type="password" id="password" formControlName="password" class="form-control" placeholder="Password" [ngClass]="{ 'is-invalid': submitted && f.password.errors }">
    <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
      <div *ngIf="f.password.errors.required">Password is required</div>
    </div>
  </div>
  <button type="submit" class="btn-login" [disabled]="loginForm.invalid">Sign In</button>
  <div *ngIf="error" class="alert alert-danger mt-3">{{ error }}</div>
  <div class="switch-link">
    <span>Don't have an account?</span>
    <a href="#" (click)="switchMode(); $event.preventDefault();">Register</a>
  </div>
</form>

<form *ngIf="isRegisterMode" [formGroup]="registerForm" (ngSubmit)="submitHandler()">
  <div class="form-group">
    <i class="form-icon fas fa-user"></i>
    <input type="text" id="reg-username" formControlName="username" class="form-control" placeholder="Username" [ngClass]="{ 'is-invalid': submitted && rf.username.errors }">
    <div *ngIf="submitted && rf.username.errors" class="invalid-feedback">
      <div *ngIf="rf.username.errors.required">Username is required</div>
    </div>
  </div>
  <div class="form-group">
    <i class="form-icon fas fa-envelope"></i>
    <input type="email" id="reg-email" formControlName="email" class="form-control" placeholder="Email" [ngClass]="{ 'is-invalid': (submitted && rf.email.errors) || (rf.email.touched && rf.email.errors) }">
    <div *ngIf="(submitted && rf.email.errors) || (rf.email.touched && rf.email.errors)" class="invalid-feedback">
      <div *ngIf="rf.email.errors.required">Email is required</div>
      <div *ngIf="rf.email.errors.email">Invalid email address</div>
    </div>
  </div>
  <div class="form-group">
    <i class="form-icon fas fa-lock"></i>
    <input type="password" id="reg-password" formControlName="password" class="form-control" placeholder="Password (min 6 chars)" [ngClass]="{ 'is-invalid': submitted && rf.password.errors }">
    <div *ngIf="submitted && rf.password.errors" class="invalid-feedback">
      <div *ngIf="rf.password.errors.required">Password is required</div>
      <div *ngIf="rf.password.errors.minlength">Password must be at least 6 characters</div>
    </div>
  </div>
  <div class="form-group">
    <i class="form-icon fas fa-lock"></i>
    <input type="password" id="reg-confirm-password" formControlName="confirmPassword" class="form-control" placeholder="Confirm Password" [ngClass]="{ 'is-invalid': (submitted && rf.confirmPassword.errors) || (submitted && registerForm.errors?.passwordMismatch) || (rf.confirmPassword.touched && registerForm.errors?.passwordMismatch) }">
    <div *ngIf="(submitted && rf.confirmPassword.errors) || (rf.confirmPassword.touched && rf.confirmPassword.errors)" class="invalid-feedback">
      <div *ngIf="rf.confirmPassword.errors.required">Confirm Password is required</div>
    </div>
    <div *ngIf="(submitted && registerForm.errors?.passwordMismatch) || (rf.confirmPassword.touched && registerForm.errors?.passwordMismatch)" class="invalid-feedback">
      <div>Passwords do not match</div>
    </div>
  </div>
  <button type="submit" class="btn-login" [disabled]="registerForm.invalid">Register</button>
  <div *ngIf="error" class="alert alert-danger mt-3">{{ error }}</div>
  <div class="switch-link switch-link-register">
    <span>Already have an account?</span>
    <a href="#" (click)="switchMode(); $event.preventDefault();"><b>Sign In</b></a>
  </div>
</form>
</div>
</div>
</div>

